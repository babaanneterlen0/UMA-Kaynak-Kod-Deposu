<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Meteor: Apocalypse - A√ßƒ±k Kaynak Deposu - UMOSP</title>
    <style>
        /* MAVƒ∞ VURGUYU VE √áER√áEVELERƒ∞ T√úM Sƒ∞STEMDE YOK EDEN AYAR */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent !important;
            -webkit-focus-ring-color: transparent !important;
            outline: none !important;
        }

        /* Tam Ekran D√ºzeni - Kƒ±rmƒ±zƒ± Apocalypse Temasƒ± */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(to bottom right, #4d0000, #000000);
            font-family: 'Arial', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }

        .container {
            padding: 2.5rem;
            max-width: 850px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 20px;
            border: 1px solid rgba(255, 0, 0, 0.3);
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.4);
        }

        h1 {
            font-size: 3.2rem;
            color: #ff4444;
            text-shadow: 0 0 20px #ff0000;
            margin-bottom: 0.2rem;
            letter-spacing: 2px;
        }

        h2 {
            font-size: 1.4rem;
            color: #ffaaaa;
            margin-bottom: 2rem;
            font-weight: normal;
        }

        .btn-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 2.5rem;
            flex-wrap: wrap;
        }

        .btn {
            color: white;
            border: none;
            padding: 1.1rem 2.2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            min-width: 240px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-transform: uppercase;
            user-select: none;
        }

        .btn-download {
            background: linear-gradient(to bottom, #ff4444, #990000);
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
        }

        .btn-upload {
            background: linear-gradient(to bottom, #444, #222);
            border: 1px solid #666;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(255, 0, 0, 0.5);
            filter: brightness(1.2);
        }

        .btn:active {
            transform: scale(0.95);
        }

        /* Kaynak Metin Alanƒ± */
        #source-text {
            width: 100%;
            height: 300px;
            padding: 15px;
            border: 2px solid #ff0000;
            background-color: #1a0505;
            color: #ffcccc;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.85rem;
            resize: none;
            border-radius: 12px;
            margin-top: 1.5rem;
            text-align: left;
            overflow-y: auto;
            line-height: 1.4;
        }

        #source-text::-webkit-scrollbar { width: 8px; }
        #source-text::-webkit-scrollbar-track { background: #000; }
        #source-text::-webkit-scrollbar-thumb { background: #ff0000; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ULTIMATE METEOR</h1>
        <h2>APOCALYPSE - A√ßƒ±k Kaynak Deposu</h2>

        <p>A≈üaƒüƒ±da Apocalypse s√ºr√ºm√ºn√ºn tam kaynak kodunu g√∂rebilirsin. Projemiz her ge√ßen g√ºn daha da g√º√ßleniyor!</p>

        <textarea id="source-text" readonly>
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ULTIMATE METEOR: APOCALYPSE</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            background: #000;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            touch-action: none;
            height: 100vh;
            width: 100vw;
            position: fixed;
        }

        #gameCanvas {
            display: block;
            background: #000;
            margin: 0 auto;
            touch-action: none;
        }

        #menu {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: radial-gradient(ellipse at center, rgba(80,0,0,0.9) 0%, rgba(0,0,0,0.95) 100%);
            z-index: 100;
            color: white;
            text-align: center;
            touch-action: pan-y;
        }

        .menu-title {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            color: #ff4444;
            text-shadow: 0 0 25px #ff0000, 0 0 35px #ff0000, 0 0 45px #ff0000;
            background: linear-gradient(45deg, #ff4444, #ff0000, #ff4444);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
            letter-spacing: 2px;
            padding: 0 1rem;
        }

        .subtitle {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: #ff6666;
            text-shadow: 0 0 15px #ff4444;
            font-weight: bold;
        }

        .btn {
            background: linear-gradient(to bottom, #ff4444, #cc0000);
            color: white;
            border: none;
            padding: 1rem 2rem;
            margin: 0.6rem;
            border-radius: 50px;
            font-size: 1.1rem;
            min-width: 200px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
            touch-action: manipulation;
        }

        .btn:active {
            transform: scale(0.95);
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
        }

        #controls {
            position: absolute;
            bottom: 2rem;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 3rem;
            touch-action: manipulation;
            z-index: 60;
        }

        .control-btn {
            background: rgba(255, 0, 0, 0.3);
            color: white;
            border: none;
            width: 5rem;
            height: 5rem;
            border-radius: 50%;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.1s;
            border: 2px solid rgba(255, 0, 0, 0.6);
            touch-action: manipulation;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .control-btn:active {
            transform: scale(0.85);
            background: rgba(255, 0, 0, 0.6);
        }

        #shootBtn {
            background: rgba(255, 100, 0, 0.4);
            border-color: rgba(255, 100, 0, 0.8);
        }

        #pauseBtn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            border: none;
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            font-size: 1.3rem;
            z-index: 50;
            display: none;
            font-weight: bold;
            cursor: pointer;
            touch-action: manipulation;
        }

        #gameInfo {
            position: absolute;
            top: 1rem;
            left: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            color: white;
            font-size: 1.3rem;
            z-index: 50;
        }

        #lives, #scoreDisplay, #goldDisplay, #powerDisplay {
            background: rgba(0, 0, 0, 0.6);
            padding: 0.8rem 1.2rem;
            border-radius: 15px;
            border: 2px solid #ff4444;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        .mode-btn {
            background: rgba(255, 0, 0, 0.1);
            border: 2px solid #ff4444;
            color: #ff4444;
            padding: 0.7rem 1rem;
            margin: 0.2rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.8rem;
            min-width: 90px;
            touch-action: manipulation;
        }

        .mode-btn.active {
            background: #ff4444;
            color: black;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
            font-weight: bold;
        }

        .mode-btn:active {
            transform: scale(0.95);
        }

        #mode-container {
            display: flex;
            margin: 0.5rem 0;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 90%;
            gap: 0.3rem;
        }

        #language-btn {
            background: transparent;
            border: 2px solid #ff4444;
            color: #ff4444;
            margin-top: 0.5rem;
        }

        /* MODE SELECTION */
        .mode-btn.easy {
            border-color: #00ff00;
            color: #00ff00;
        }
        .mode-btn.easy.active {
            background: #00ff00;
            color: black;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.7);
        }

        .mode-btn.normal {
            border-color: #ffff00;
            color: #ffff00;
        }
        .mode-btn.normal.active {
            background: #ffff00;
            color: black;
            box-shadow: 0 0 20px rgba(255, 255, 0, 0.7);
        }

        .mode-btn.hard {
            border-color: #ffaa00;
            color: #ffaa00;
        }
        .mode-btn.hard.active {
            background: #ffaa00;
            color: black;
            box-shadow: 0 0 20px rgba(255, 170, 0, 0.7);
        }

        .mode-btn.extreme {
            border-color: #ff4444;
            color: #ff4444;
        }
        .mode-btn.extreme.active {
            background: #ff4444;
            color: black;
            box-shadow: 0 0 20px rgba(255, 68, 68, 0.7);
        }

        .mode-btn.impossible {
            border-color: #ff00ff;
            color: #ff00ff;
        }
        .mode-btn.impossible.active {
            background: #ff00ff;
            color: black;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.7);
        }

        /* SHOP STYLES */
        #shopMenu {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 200;
            display: none;
            flex-direction: column;
            align-items: center;
            color: white;
            overflow-y: auto;
            padding: 1rem;
            touch-action: pan-y;
        }

        .shop-header {
            position: sticky;
            top: 0;
            background: rgba(0,0,0,0.9);
            width: 100%;
            padding: 1rem;
            text-align: center;
            border-bottom: 2px solid #ff4444;
            z-index: 201;
        }

        .shop-content {
            width: 100%;
            max-width: 500px;
            padding: 1rem;
        }

        .shop-item {
            background: rgba(255,0,0,0.1);
            border: 2px solid #ff4444;
            border-radius: 15px;
            padding: 1rem;
            margin: 0.5rem 0;
            width: 100%;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            touch-action: manipulation;
        }

        .shop-item:active {
            transform: scale(0.95);
            background: rgba(255,0,0,0.2);
        }

        .shop-item.unlocked {
            border-color: #00ff00;
            background: rgba(0,255,0,0.1);
        }

        .shop-item.equipped {
            border-color: #ffff00;
            background: rgba(255,255,0,0.1);
        }

        .price-tag {
            color: #ff4444;
            font-weight: bold;
            margin: 0.5rem 0;
        }

        .back-btn {
            position: fixed;
            top: 1rem;
            left: 1rem;
            background: rgba(255,0,0,0.7);
            color: white;
            border: none;
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            font-size: 1.2rem;
            z-index: 202;
            cursor: pointer;
            touch-action: manipulation;
        }

        .shop-buttons {
            position: sticky;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            width: 100%;
            padding: 1rem;
            text-align: center;
            border-top: 2px solid #ff4444;
        }

        #menuGoldDisplay {
            background: rgba(255,0,0,0.2);
            border: 2px solid #ff4444;
            border-radius: 20px;
            padding: 0.6rem 1.2rem;
            margin: 0.5rem;
            font-size: 1.1rem;
            font-weight: bold;
            color: #ff4444;
        }

        .mode-description {
            font-size: 0.7rem;
            opacity: 0.8;
            margin-top: 0.2rem;
            color: #ff6666;
        }

        /* YENƒ∞ EKLENEN STƒ∞LLER */
        .skin-preview {
            width: 80px;
            height: 60px;
            margin: 0.5rem auto;
            position: relative;
        }

        .boss-health-bar {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 20px;
            background: rgba(0,0,0,0.7);
            border: 2px solid #ff4444;
            border-radius: 10px;
            overflow: hidden;
            z-index: 40;
        }

        .boss-health-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0000, #ffff00);
            transition: width 0.3s;
        }

        .boss-name {
            position: absolute;
            top: 35px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff4444;
            font-weight: bold;
            font-size: 1.2rem;
            text-shadow: 0 0 10px #000;
            z-index: 40;
        }

        .bonus-popup {
            position: absolute;
            color: #00ff00;
            font-weight: bold;
            font-size: 1.2rem;
            text-shadow: 0 0 10px #00ff00;
            z-index: 45;
            animation: floatUp 1.5s ease-out forwards;
        }

        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <button id="pauseBtn">‚è∏</button>
    
    <div id="gameInfo">
        <div id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        <div id="scoreDisplay">‚≠ê Skor: 0</div>
        <div id="goldDisplay">üí∞ Altƒ±n: 0</div>
        <div id="powerDisplay">‚ö° G√º√ßler: </div>
    </div>

    <!-- Boss Health Bar -->
    <div id="bossHealthBar" class="boss-health-bar" style="display: none;">
        <div class="boss-health-fill" style="width: 100%;"></div>
    </div>
    <div id="bossName" class="boss-name" style="display: none;"></div>
    
    <div id="menu">
        <h1 class="menu-title">ULTIMATE METEOR</h1>
        <div class="subtitle">APOCALYPSE</div>
        
        <!-- T√úM OYUN MODLARI -->
        <div id="mode-container">
            <button class="mode-btn easy active" id="easyMode">KOLAY</button>
            <button class="mode-btn normal" id="normalMode">NORMAL</button>
            <button class="mode-btn hard" id="hardMode">ZOR</button>
            <button class="mode-btn extreme" id="extremeMode">EKSTREM</button>
            <button class="mode-btn impossible" id="impossibleMode">ƒ∞MKANSIZ</button>
        </div>
        
        <div id="modeDescription" class="mode-description">
            Kolay: Yeni ba≈ülayanlar i√ßin ideal
        </div>
        
        <!-- ANA MEN√úDE ALTIN -->
        <div id="menuGoldDisplay">üí∞ Altƒ±n: 0</div>
        
        <button class="btn" id="startBtn">üöÄ OYUNU BA≈ûLAT</button>
        <button class="btn" id="shopBtn">üõí GALAKTƒ∞K MAƒûAZA</button>
        <button class="btn" id="language-btn">üåê Dƒ∞L: T√úRK√áE</button>
    </div>

    <!-- MAƒûAZA MEN√úS√ú -->
    <div id="shopMenu">
        <button class="back-btn" id="shopBackBtn">‚Üê</button>
        
        <div class="shop-header">
            <h2>üöÄ GALAKTƒ∞K MAƒûAZA üåü</h2>
            <div id="goldDisplayShop">Altƒ±n: 0</div>
        </div>
        
        <div class="shop-content">
            <div id="shopItems">
                <!-- Shop items will be generated here -->
            </div>
        </div>
        
        <div class="shop-buttons">
            <button class="btn" id="backToMenuBtn">MEN√úYE D√ñN</button>
        </div>
    </div>

    <div id="controls">
        <button class="control-btn" id="leftBtn">‚Üê</button>
        <button class="control-btn" id="shootBtn">üî¥</button>
        <button class="control-btn" id="rightBtn">‚Üí</button>
    </div>

    <script>
        // ULTIMATE METEOR: APOCALYPSE - G√úNCELLENMƒ∞≈û S√úR√úM
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const menu = document.getElementById('menu');
        const shopMenu = document.getElementById('shopMenu');
        const pauseBtn = document.getElementById('pauseBtn');
        const livesDisplay = document.getElementById('lives');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const goldDisplay = document.getElementById('goldDisplay');
        const powerDisplay = document.getElementById('powerDisplay');
        const menuGoldDisplay = document.getElementById('menuGoldDisplay');
        const goldDisplayShop = document.getElementById('goldDisplayShop');
        const modeDescription = document.getElementById('modeDescription');
        const bossHealthBar = document.getElementById('bossHealthBar');
        const bossName = document.getElementById('bossName');
        
        // Canvas boyutunu ayarla
        function resizeCanvas() {
            const size = Math.min(window.innerWidth, window.innerHeight);
            canvas.width = size * 0.95;
            canvas.height = size * 1.3;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Oyun durumu
        let gameActive = false;
        let gamePaused = false;
        let lives = 3;
        let score = 0;
        let gold = 0;
        let language = 'Turkish';
        let gameMode = 'Easy';
        let meteorsDestroyed = 0;
        let bossActive = false;
        let bossHealth = 0;
        let bossMaxHealth = 0;
        let currentBoss = null;

        // YILDIZ Sƒ∞STEMƒ∞
        let stars = [];
        function createStars() {
            stars = [];
            for (let i = 0; i < 100; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2 + 1,
                    speed: Math.random() * 0.5 + 0.1,
                    brightness: Math.random() * 0.5 + 0.5
                });
            }
        }

        function updateStars() {
            stars.forEach(star => {
                star.y += star.speed;
                if (star.y > canvas.height) {
                    star.y = 0;
                    star.x = Math.random() * canvas.width;
                }
            });
        }

        function drawStars() {
            stars.forEach(star => {
                ctx.globalAlpha = star.brightness;
                ctx.fillStyle = '#ffffff';
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
            });
            ctx.globalAlpha = 1.0;
        }

        // YENƒ∞: SKƒ∞N DEƒûƒ∞≈ûTƒ∞RME MEKANƒ∞ZMASI - MAVƒ∞ SKƒ∞N BA≈ûLANGI√á SKƒ∞Nƒ∞
        let shipSkins = {
            blue: { 
                color: '#44AAFF', 
                name: 'Mavi Sava≈ü√ßƒ±', 
                unlocked: true,
                equipped: true,
                type: 'classic'
            },
            default: { 
                color: '#ff4444', 
                name: 'Kƒ±rmƒ±zƒ± Sava≈ü√ßƒ±', 
                unlocked: true,
                equipped: false,
                type: 'classic'
            },
            premium: { 
                color: '#FFD700', 
                name: 'Altƒ±n Sava≈ü√ßƒ±', 
                price: 35, 
                unlocked: false,
                equipped: false,
                type: 'premium'
            },
            fire: { 
                color: '#FF4500', 
                name: 'Ate≈ü Gemisi', 
                price: 35, 
                unlocked: false,
                equipped: false,
                type: 'fire'
            },
            ice: { 
                color: '#00FFFF', 
                name: 'Buz Koruyucu', 
                price: 35, 
                unlocked: false,
                equipped: false,
                type: 'ice'
            },
            neon: { 
                color: '#FF00FF', 
                name: 'Neon Avcƒ±', 
                price: 35, 
                unlocked: false,
                equipped: false,
                type: 'neon'
            },
            ghost: {
                color: '#888888',
                name: 'Hayalet Gemi',
                price: 40,
                unlocked: false,
                equipped: false,
                type: 'ghost'
            },
            cosmic: {
                color: '#8A2BE2',
                name: 'Kozmik Sava≈ü√ßƒ±',
                price: 45,
                unlocked: false,
                equipped: false,
                type: 'cosmic'
            }
        };

        let meteorSkins = {
            default: { 
                color: '#ff4444', 
                name: 'Kƒ±rmƒ±zƒ± Meteor', 
                unlocked: true,
                equipped: true
            },
            gold: { 
                color: '#FFD700', 
                name: 'Altƒ±n Meteor', 
                price: 25, 
                unlocked: false,
                equipped: false
            },
            crystal: { 
                color: '#87CEEB', 
                name: 'Kristal Meteor', 
                price: 25, 
                unlocked: false,
                equipped: false
            },
            lava: { 
                color: '#FF8C00', 
                name: 'Lav Meteor', 
                price: 25, 
                unlocked: false,
                equipped: false
            },
            cosmic: { 
                color: '#9370DB', 
                name: 'Kozmik Meteor', 
                price: 25, 
                unlocked: false,
                equipped: false
            }
        };

        let currentShipSkin = 'blue';
        let currentMeteorSkin = 'default';

        // YENƒ∞ METEOR T√úRLERƒ∞ - KIRMIZI
        const METEOR_TYPES = {
            NORMAL: { health: 1, color: '#ff4444', points: 10 },
            LAVA: { health: 2, color: '#ff5500', points: 15, effect: 'explosive' },
            DARK: { health: 3, color: '#ff0000', points: 20, effect: 'invisible' }
        };

        // YENƒ∞ G√ú√áLER
        let powerUps = {
            shield: { active: false, duration: 0, maxDuration: 600 },
            rapidFire: { active: false, duration: 0, maxDuration: 450 },
            tripleShot: { active: false, duration: 0, maxDuration: 300 },
            bomb: { active: false, duration: 0, maxDuration: 180 },
            laser: { active: false, duration: 0, maxDuration: 240 },
            timeFreeze: { active: false, duration: 0, maxDuration: 400 },
            apocalypse: { active: false, duration: 0, maxDuration: 200 }
        };

        // YENƒ∞ BOSS'LAR
        const BOSSES = {
            INFERNO_DRAGON: {
                name: 'üî• Ate≈ü Ejderhasƒ±',
                health: 1000,
                color: '#ff3300',
                attackPattern: 'fire',
                speed: 1.5,
                size: 150
            },
            DARK_LORD: {
                name: 'üåë Karanlƒ±k Lordu', 
                health: 1200,
                color: '#990000',
                attackPattern: 'shadow',
                speed: 2,
                size: 130
            },
            APOCALYPSE_BEAST: {
                name: 'üíÄ Kƒ±yamet Canavarƒ±',
                health: 1500,
                color: '#ff0066',
                attackPattern: 'multi',
                speed: 1,
                size: 180
            }
        };

        let activePowerUps = [];
        let powerUpItems = [];
        let explosions = [];

        // Dil metinleri
        const texts = {
            English: {
                start: 'üöÄ START GAME',
                easy: 'EASY',
                normal: 'NORMAL', 
                hard: 'HARD',
                extreme: 'EXTREME',
                impossible: 'IMPOSSIBLE',
                language: 'üåê LANGUAGE: ENGLISH',
                lives: 'Lives: ',
                score: 'Score: ',
                gold: 'Gold: ',
                pause: 'PAUSED',
                powers: 'Powers: ',
                boss: 'BOSS INCOMING!',
                equip: 'EQUIP',
                equipped: 'EQUIPPED',
                modeDescriptions: {
                    easy: 'Easy: Perfect for beginners',
                    normal: 'Normal: Balanced challenge',
                    hard: 'Hard: For experienced players', 
                    extreme: 'Extreme: Only for experts',
                    impossible: 'Impossible: Are you crazy?'
                }
            },
            Turkish: {
                start: 'üöÄ OYUNU BA≈ûLAT',
                easy: 'KOLAY',
                normal: 'NORMAL',
                hard: 'ZOR', 
                extreme: 'EKSTREM',
                impossible: 'ƒ∞MKANSIZ',
                language: 'üåê Dƒ∞L: T√úRK√áE',
                lives: 'Can: ',
                score: 'Skor: ',
                gold: 'Altƒ±n: ',
                pause: 'DURAKLATILDI',
                powers: 'G√º√ßler: ',
                boss: 'BOSS GELƒ∞YOR!',
                equip: 'KU≈ûAN',
                equipped: 'KU≈ûANILDI',
                modeDescriptions: {
                    easy: 'Kolay: Yeni ba≈ülayanlar i√ßin ideal',
                    normal: 'Normal: Dengeli zorluk',
                    hard: 'Zor: Tecr√ºbeli oyuncular i√ßin',
                    extreme: 'Ekstrem: Sadece uzmanlar i√ßin',
                    impossible: 'ƒ∞mkansƒ±z: Deli misin?'
                }
            }
        };

        // YENƒ∞: GEMƒ∞ AYARLARI - MAVƒ∞ BA≈ûLANGI√á
        const ship = {
            x: canvas.width / 2,
            y: canvas.height - 80,
            width: 45,
            height: 30,
            speed: 6,
            health: 100,
            maxHealth: 100,
            color: '#44AAFF',
            moveLeft: false,
            moveRight: false,
            shield: false,
            skinType: 'classic'
        };

        // OYUN MODU AYARLARI
        const gameModeSettings = {
            Easy: {
                meteorSize: 20,
                meteorSpeed: 2,
                meteorHealth: 1,
                spawnRate: 0.02,
                powerUpRate: 0.01,
                bossHealth: 500,
                playerSpeed: 5,
                lives: 3
            },
            Normal: {
                meteorSize: 18,
                meteorSpeed: 3,
                meteorHealth: 1,
                spawnRate: 0.025,
                powerUpRate: 0.008,
                bossHealth: 800,
                playerSpeed: 6,
                lives: 3
            },
            Hard: {
                meteorSize: 16,
                meteorSpeed: 4,
                meteorHealth: 2,
                spawnRate: 0.03,
                powerUpRate: 0.006,
                bossHealth: 1000,
                playerSpeed: 6,
                lives: 3
            },
            Extreme: {
                meteorSize: 15,
                meteorSpeed: 5,
                meteorHealth: 2,
                spawnRate: 0.035,
                powerUpRate: 0.005,
                bossHealth: 1200,
                playerSpeed: 7,
                lives: 3
            },
            Impossible: {
                meteorSize: 12,
                meteorSpeed: 7,
                meteorHealth: 3,
                spawnRate: 0.05,
                powerUpRate: 0.003,
                bossHealth: 1500,
                playerSpeed: 8,
                lives: 3
            }
        };

        // Oyun nesneleri
        let meteors = [];
        let bullets = [];
        let boss = null;

        // YENƒ∞: GEMƒ∞ √áƒ∞Zƒ∞M FONKSƒ∞YONU - ULTIMATE METEOR 2 STƒ∞Lƒ∞NDE
        function drawShip() {
            const skin = shipSkins[currentShipSkin];
            ctx.fillStyle = skin.color;
            
            switch(skin.type) {
                case 'classic':
                    // Klasik √º√ßgen gemi
                    ctx.beginPath();
                    ctx.moveTo(ship.x, ship.y - ship.height);
                    ctx.lineTo(ship.x - ship.width/2, ship.y);
                    ctx.lineTo(ship.x + ship.width/2, ship.y);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'premium':
                    // Premium - daha detaylƒ± gemi
                    ctx.beginPath();
                    ctx.moveTo(ship.x, ship.y - ship.height);
                    ctx.lineTo(ship.x - ship.width/2, ship.y - ship.height/3);
                    ctx.lineTo(ship.x - ship.width/2, ship.y);
                    ctx.lineTo(ship.x, ship.y + ship.height/3);
                    ctx.lineTo(ship.x + ship.width/2, ship.y);
                    ctx.lineTo(ship.x + ship.width/2, ship.y - ship.height/3);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'fire':
                    // Ate≈ü gemisi - keskin kanatlar
                    ctx.beginPath();
                    ctx.moveTo(ship.x, ship.y - ship.height);
                    ctx.lineTo(ship.x - ship.width/2, ship.y - ship.height/4);
                    ctx.lineTo(ship.x - ship.width/3, ship.y);
                    ctx.lineTo(ship.x, ship.y + ship.height/4);
                    ctx.lineTo(ship.x + ship.width/3, ship.y);
                    ctx.lineTo(ship.x + ship.width/2, ship.y - ship.height/4);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'ice':
                    // Buz gemisi - p√ºr√ºzs√ºz hatlar
                    ctx.beginPath();
                    ctx.moveTo(ship.x, ship.y - ship.height);
                    ctx.lineTo(ship.x - ship.width/2.5, ship.y - ship.height/4);
                    ctx.lineTo(ship.x - ship.width/2, ship.y);
                    ctx.lineTo(ship.x, ship.y + ship.height/3);
                    ctx.lineTo(ship.x + ship.width/2, ship.y);
                    ctx.lineTo(ship.x + ship.width/2.5, ship.y - ship.height/4);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'neon':
                    // Neon avcƒ± - agresif tasarƒ±m
                    ctx.beginPath();
                    ctx.moveTo(ship.x, ship.y - ship.height);
                    ctx.lineTo(ship.x - ship.width/2, ship.y - ship.height/2);
                    ctx.lineTo(ship.x - ship.width/3, ship.y);
                    ctx.lineTo(ship.x, ship.y + ship.height/2);
                    ctx.lineTo(ship.x + ship.width/3, ship.y);
                    ctx.lineTo(ship.x + ship.width/2, ship.y - ship.height/2);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'ghost':
                    // Hayalet gemi - dalgalƒ± form
                    ctx.beginPath();
                    ctx.moveTo(ship.x, ship.y - ship.height);
                    ctx.lineTo(ship.x - ship.width/2, ship.y - ship.height/3);
                    ctx.quadraticCurveTo(ship.x - ship.width/3, ship.y, ship.x - ship.width/4, ship.y + ship.height/4);
                    ctx.lineTo(ship.x, ship.y + ship.height/3);
                    ctx.lineTo(ship.x + ship.width/4, ship.y + ship.height/4);
                    ctx.quadraticCurveTo(ship.x + ship.width/3, ship.y, ship.x + ship.width/2, ship.y - ship.height/3);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'cosmic':
                    // Kozmik sava≈ü√ßƒ± - simetrik kanatlar
                    ctx.beginPath();
                    ctx.moveTo(ship.x, ship.y - ship.height);
                    ctx.lineTo(ship.x - ship.width/2, ship.y - ship.height/4);
                    ctx.lineTo(ship.x - ship.width/2.5, ship.y);
                    ctx.lineTo(ship.x, ship.y + ship.height/4);
                    ctx.lineTo(ship.x + ship.width/2.5, ship.y);
                    ctx.lineTo(ship.x + ship.width/2, ship.y - ship.height/4);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Ekstra detay
                    ctx.fillStyle = '#ffffff';
                    ctx.beginPath();
                    ctx.arc(ship.x, ship.y - ship.height/3, 3, 0, Math.PI * 2);
                    ctx.fill();
                    break;
            }

            // Motor ate≈üi
            if (powerUps.rapidFire.active) {
                ctx.fillStyle = skin.type === 'fire' ? '#ff6600' : '#ffff00';
                ctx.beginPath();
                ctx.moveTo(ship.x - 10, ship.y);
                ctx.lineTo(ship.x, ship.y + 15);
                ctx.lineTo(ship.x + 10, ship.y);
                ctx.closePath();
                ctx.fill();
            }

            // Kalkan efekti
            if (ship.shield) {
                ctx.strokeStyle = skin.type === 'ice' ? '#00ffff' : 
                                skin.type === 'fire' ? '#ff6600' : 
                                skin.type === 'neon' ? '#ff00ff' : '#44AAFF';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.arc(ship.x, ship.y - ship.height/2, ship.width, 0, Math.PI * 2);
                ctx.stroke();
            }
        }

        // YENƒ∞: GEMƒ∞ √ñNƒ∞ZLEME √áƒ∞Zƒ∞M FONKSƒ∞YONU
        function drawShipPreview(skinKey, element) {
            const canvas = document.createElement('canvas');
            canvas.width = 80;
            canvas.height = 60;
            const ctx = canvas.getContext('2d');
            
            const skin = shipSkins[skinKey];
            const centerX = 40;
            const centerY = 30;
            const width = 30;
            const height = 20;
            
            ctx.fillStyle = skin.color;
            
            switch(skin.type) {
                case 'classic':
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY - height);
                    ctx.lineTo(centerX - width/2, centerY);
                    ctx.lineTo(centerX + width/2, centerY);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'premium':
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY - height);
                    ctx.lineTo(centerX - width/2, centerY - height/3);
                    ctx.lineTo(centerX - width/2, centerY);
                    ctx.lineTo(centerX, centerY + height/3);
                    ctx.lineTo(centerX + width/2, centerY);
                    ctx.lineTo(centerX + width/2, centerY - height/3);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'fire':
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY - height);
                    ctx.lineTo(centerX - width/2, centerY - height/4);
                    ctx.lineTo(centerX - width/3, centerY);
                    ctx.lineTo(centerX, centerY + height/4);
                    ctx.lineTo(centerX + width/3, centerY);
                    ctx.lineTo(centerX + width/2, centerY - height/4);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'ice':
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY - height);
                    ctx.lineTo(centerX - width/2.5, centerY - height/4);
                    ctx.lineTo(centerX - width/2, centerY);
                    ctx.lineTo(centerX, centerY + height/3);
                    ctx.lineTo(centerX + width/2, centerY);
                    ctx.lineTo(centerX + width/2.5, centerY - height/4);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'neon':
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY - height);
                    ctx.lineTo(centerX - width/2, centerY - height/2);
                    ctx.lineTo(centerX - width/3, centerY);
                    ctx.lineTo(centerX, centerY + height/2);
                    ctx.lineTo(centerX + width/3, centerY);
                    ctx.lineTo(centerX + width/2, centerY - height/2);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'ghost':
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY - height);
                    ctx.lineTo(centerX - width/2, centerY - height/3);
                    ctx.quadraticCurveTo(centerX - width/3, centerY, centerX - width/4, centerY + height/4);
                    ctx.lineTo(centerX, centerY + height/3);
                    ctx.lineTo(centerX + width/4, centerY + height/4);
                    ctx.quadraticCurveTo(centerX + width/3, centerY, centerX + width/2, centerY - height/3);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'cosmic':
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY - height);
                    ctx.lineTo(centerX - width/2, centerY - height/4);
                    ctx.lineTo(centerX - width/2.5, centerY);
                    ctx.lineTo(centerX, centerY + height/4);
                    ctx.lineTo(centerX + width/2.5, centerY);
                    ctx.lineTo(centerX + width/2, centerY - height/4);
                    ctx.closePath();
                    ctx.fill();
                    
                    ctx.fillStyle = '#ffffff';
                    ctx.beginPath();
                    ctx.arc(centerX, centerY - height/3, 2, 0, Math.PI * 2);
                    ctx.fill();
                    break;
            }
            
            element.innerHTML = '';
            element.appendChild(canvas);
        }

        // DOKUNMATƒ∞K KONTROLLER
        function setupTouchControls() {
            const leftBtn = document.getElementById('leftBtn');
            const rightBtn = document.getElementById('rightBtn');
            const shootBtn = document.getElementById('shootBtn');

            leftBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                ship.moveLeft = true;
                ship.moveRight = false;
            });

            leftBtn.addEventListener('touchend', function(e) {
                e.preventDefault();
                ship.moveLeft = false;
            });

            rightBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                ship.moveRight = true;
                ship.moveLeft = false;
            });

            rightBtn.addEventListener('touchend', function(e) {
                e.preventDefault();
                ship.moveRight = false;
            });

            shootBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                if (gameActive && !gamePaused) {
                    shoot();
                }
            });

            // Mouse events
            leftBtn.addEventListener('mousedown', function(e) {
                e.preventDefault();
                ship.moveLeft = true;
                ship.moveRight = false;
            });

            leftBtn.addEventListener('mouseup', function(e) {
                e.preventDefault();
                ship.moveLeft = false;
            });

            rightBtn.addEventListener('mousedown', function(e) {
                e.preventDefault();
                ship.moveRight = true;
                ship.moveLeft = false;
            });

            rightBtn.addEventListener('mouseup', function(e) {
                e.preventDefault();
                ship.moveRight = false;
            });

            shootBtn.addEventListener('mousedown', function(e) {
                e.preventDefault();
                if (gameActive && !gamePaused) {
                    shoot();
                }
            });
        }

        // YENƒ∞ METEOR OLU≈ûTURMA - KIRMIZI
        function createMeteor() {
            const settings = gameModeSettings[gameMode];
            const meteorTypes = Object.keys(METEOR_TYPES);
            const randomType = meteorTypes[Math.floor(Math.random() * meteorTypes.length)];
            const type = METEOR_TYPES[randomType];
            
            // Meteor rengini maƒüazadan al
            const meteorColor = meteorSkins[currentMeteorSkin].color;
            
            return {
                x: Math.random() * canvas.width,
                y: -30,
                size: settings.meteorSize,
                speed: settings.meteorSpeed,
                health: type.health,
                color: meteorColor,
                type: randomType,
                points: type.points,
                effect: type.effect,
                invisible: type.effect === 'invisible' ? Math.random() < 0.5 : false
            };
        }

        // YENƒ∞ BOSS OLU≈ûTURMA
        function createBoss() {
            const settings = gameModeSettings[gameMode];
            const bossKeys = Object.keys(BOSSES);
            const randomBoss = bossKeys[Math.floor(Math.random() * bossKeys.length)];
            const bossData = BOSSES[randomBoss];
            
            bossActive = true;
            bossHealth = bossData.health;
            bossMaxHealth = bossData.health;
            currentBoss = randomBoss;
            
            // Boss health bar'ƒ± g√∂ster
            bossHealthBar.style.display = 'block';
            bossName.style.display = 'block';
            bossName.textContent = bossData.name;
            updateBossHealthBar();
            
            return {
                x: canvas.width / 2,
                y: 100,
                width: bossData.size,
                height: bossData.size * 0.6,
                speed: bossData.speed,
                color: bossData.color,
                attackPattern: bossData.attackPattern,
                lastAttack: 0,
                attackCooldown: 2000,
                name: bossData.name
            };
        }

        function updateBossHealthBar() {
            const healthPercent = (bossHealth / bossMaxHealth) * 100;
            const healthFill = bossHealthBar.querySelector('.boss-health-fill');
            healthFill.style.width = healthPercent + '%';
            
            // Renk deƒüi≈üimi
            if (healthPercent > 60) {
                healthFill.style.background = 'linear-gradient(90deg, #ff0000, #ffff00)';
            } else if (healthPercent > 30) {
                healthFill.style.background = 'linear-gradient(90deg, #ffff00, #ff9900)';
            } else {
                healthFill.style.background = 'linear-gradient(90deg, #ff9900, #ff0000)';
            }
        }

        // YENƒ∞ G√ú√á OLU≈ûTURMA
        function createPowerUp() {
            const settings = gameModeSettings[gameMode];
            const powerTypes = ['shield', 'rapidFire', 'tripleShot', 'bomb', 'laser', 'timeFreeze', 'apocalypse'];
            const type = powerTypes[Math.floor(Math.random() * powerTypes.length)];
            
            return {
                x: Math.random() * (canvas.width - 30),
                y: -20,
                width: 25,
                height: 25,
                type: type,
                color: getPowerUpColor(type),
                speed: 2
            };
        }

        function getPowerUpColor(type) {
            const colors = {
                shield: '#00ffff',
                rapidFire: '#ffff00',
                tripleShot: '#ff00ff',
                bomb: '#ff4444',
                laser: '#00ff00',
                timeFreeze: '#8888ff',
                apocalypse: '#ff0000'
            };
            return colors[type];
        }

        function getPowerUpSymbol(type) {
            const symbols = {
                shield: 'üõ°Ô∏è',
                rapidFire: '‚ö°',
                tripleShot: 'üî∫',
                bomb: 'üí£',
                laser: 'üì°',
                timeFreeze: '‚è∞',
                apocalypse: 'üíÄ'
            };
            return symbols[type];
        }

        // ATE≈û ETME
        function shoot() {
            const baseDamage = 10;
            
            if (powerUps.tripleShot.active) {
                bullets.push({x: ship.x - 15, y: ship.y - 40, vx: 0, vy: -12, color: '#ff00ff', damage: baseDamage * 2});
                bullets.push({x: ship.x, y: ship.y - 40, vx: 0, vy: -12, color: '#ff00ff', damage: baseDamage * 2});
                bullets.push({x: ship.x + 15, y: ship.y - 40, vx: 0, vy: -12, color: '#ff00ff', damage: baseDamage * 2});
            } else if (powerUps.laser.active) {
                bullets.push({x: ship.x, y: ship.y - 40, vx: 0, vy: -18, color: '#00ff00', width: 8, height: 25, damage: baseDamage * 3});
            } else if (powerUps.apocalypse.active) {
                // Kƒ±yamet modu - √ßapraz ate≈ü
                bullets.push({x: ship.x - 10, y: ship.y - 40, vx: -1, vy: -14, color: '#ff0000', damage: baseDamage * 4});
                bullets.push({x: ship.x, y: ship.y - 40, vx: 0, vy: -14, color: '#ff0000', damage: baseDamage * 4});
                bullets.push({x: ship.x + 10, y: ship.y - 40, vx: 1, vy: -14, color: '#ff0000', damage: baseDamage * 4});
            } else {
                const bulletSpeed = powerUps.rapidFire.active ? -14 : -10;
                bullets.push({x: ship.x, y: ship.y - 40, vx: 0, vy: bulletSpeed, color: '#ffff00', width: 5, height: 15, damage: baseDamage});
            }
        }

        // PATLAMA EFEKTƒ∞
        function createExplosion(x, y, size, color) {
            explosions.push({
                x: x,
                y: y,
                size: size,
                color: color,
                life: 1.0,
                maxLife: 1.0
            });
        }

        function drawMeteors() {
            meteors.forEach(meteor => {
                // G√∂r√ºnmez meteor efekti
                if (meteor.invisible && Math.sin(Date.now() / 200) > 0) {
                    ctx.globalAlpha = 0.3;
                } else {
                    ctx.globalAlpha = 1.0;
                }
                
                // METEOR RENGƒ∞ MAƒûAZADAN GELƒ∞YOR
                ctx.fillStyle = meteor.color;
                ctx.beginPath();
                ctx.arc(meteor.x, meteor.y, meteor.size, 0, Math.PI * 2);
                ctx.fill();

                // Lav meteor efekti
                if (meteor.type === 'LAVA') {
                    ctx.fillStyle = '#ffaa00';
                    ctx.beginPath();
                    ctx.arc(meteor.x, meteor.y, meteor.size * 0.6, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.globalAlpha = 1.0;
            });
        }

        function drawBoss() {
            if (!bossActive) return;

            // Boss g√∂vdesi
            ctx.fillStyle = boss.color;
            
            // Boss tipine g√∂re ≈üekil
            if (currentBoss === 'INFERNO_DRAGON') {
                // Ejderha ≈üekli
                ctx.beginPath();
                ctx.ellipse(boss.x, boss.y, boss.width/2, boss.height/2, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Ate≈ü efekti
                ctx.fillStyle = '#ff6600';
                ctx.beginPath();
                ctx.ellipse(boss.x, boss.y + boss.height/3, boss.width/3, boss.height/4, 0, 0, Math.PI * 2);
                ctx.fill();
                
            } else if (currentBoss === 'DARK_LORD') {
                // Karanlƒ±k lordu - √º√ßgen form
                ctx.beginPath();
                ctx.moveTo(boss.x, boss.y - boss.height/2);
                ctx.lineTo(boss.x - boss.width/2, boss.y + boss.height/2);
                ctx.lineTo(boss.x + boss.width/2, boss.y + boss.height/2);
                ctx.closePath();
                ctx.fill();
                
            } else {
                // Kƒ±yamet canavarƒ± - dikd√∂rtgen
                ctx.fillRect(boss.x - boss.width/2, boss.y - boss.height/2, boss.width, boss.height);
            }
        }

        function drawPowerUps() {
            powerUpItems.forEach(powerUp => {
                ctx.fillStyle = powerUp.color;
                ctx.fillRect(powerUp.x, powerUp.y, powerUp.width, powerUp.height);
                
                ctx.fillStyle = '#ffffff';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(getPowerUpSymbol(powerUp.type), powerUp.x + powerUp.width/2, powerUp.y + powerUp.height/2 + 4);
                ctx.textAlign = 'left';
            });
        }

        function drawBullets() {
            bullets.forEach(bullet => {
                ctx.fillStyle = bullet.color;
                if (bullet.width && bullet.height) {
                    ctx.fillRect(bullet.x - bullet.width/2, bullet.y, bullet.width, bullet.height);
                } else {
                    ctx.beginPath();
                    ctx.arc(bullet.x, bullet.y, 3, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
        }

        function drawExplosions() {
            explosions.forEach((explosion, index) => {
                const progress = explosion.life / explosion.maxLife;
                const size = explosion.size * (1 - progress);
                
                ctx.globalAlpha = progress;
                ctx.fillStyle = explosion.color;
                ctx.beginPath();
                ctx.arc(explosion.x, explosion.y, size, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.globalAlpha = 1.0;
                
                // Patlama √∂mr√ºn√º azalt
                explosion.life -= 0.05;
                if (explosion.life <= 0) {
                    explosions.splice(index, 1);
                }
            });
        }

        function drawLives() {
            const lang = texts[language];
            livesDisplay.textContent = lang.lives + '‚ù§Ô∏è'.repeat(lives);
        }

        function drawScore() {
            const lang = texts[language];
            scoreDisplay.textContent = lang.score + score;
        }

        function drawGold() {
            const lang = texts[language];
            const goldText = lang.gold + gold;
            goldDisplay.textContent = goldText;
            menuGoldDisplay.textContent = goldText;
            goldDisplayShop.textContent = goldText;
        }

        function drawPowerDisplay() {
            const lang = texts[language];
            let powerText = lang.powers;
            
            activePowerUps.forEach(power => {
                powerText += getPowerUpSymbol(power) + ' ';
            });
            
            powerDisplay.textContent = powerText;
        }

        // YENƒ∞: 10 METEOR BONUS Sƒ∞STEMƒ∞
        function checkMeteorBonus() {
            if (meteorsDestroyed > 0 && meteorsDestroyed % 10 === 0) {
                gold += 10;
                drawGold();
                saveGameData();
                
                showBonusPopup();
            }
        }

        function showBonusPopup() {
            const popup = document.createElement('div');
            popup.className = 'bonus-popup';
            popup.textContent = '+10 Altƒ±n! üéâ';
            popup.style.left = ship.x + 'px';
            popup.style.top = ship.y + 'px';
            document.body.appendChild(popup);
            
            setTimeout(() => {
                document.body.removeChild(popup);
            }, 1500);
        }

        // KAYDETME Sƒ∞STEMƒ∞ - G√úNCELLENDƒ∞
        function saveGameData() {
            const gameData = {
                gold: gold,
                currentShipSkin: currentShipSkin,
                currentMeteorSkin: currentMeteorSkin,
                shipSkins: {},
                meteorSkins: {},
                language: language,
                gameMode: gameMode
            };

            Object.keys(shipSkins).forEach(key => {
                gameData.shipSkins[key] = {
                    unlocked: shipSkins[key].unlocked,
                    equipped: shipSkins[key].equipped
                };
            });

            Object.keys(meteorSkins).forEach(key => {
                gameData.meteorSkins[key] = {
                    unlocked: meteorSkins[key].unlocked,
                    equipped: meteorSkins[key].equipped
                };
            });

            localStorage.setItem('ultimateMeteorApocalypse', JSON.stringify(gameData));
        }

        function loadGameData() {
            const savedData = localStorage.getItem('ultimateMeteorApocalypse');
            if (savedData) {
                try {
                    const gameData = JSON.parse(savedData);
                    
                    gold = gameData.gold || 0;
                    currentShipSkin = gameData.currentShipSkin || 'blue';
                    currentMeteorSkin = gameData.currentMeteorSkin || 'default';
                    language = gameData.language || 'Turkish';
                    gameMode = gameData.gameMode || 'Easy';
                    
                    if (gameData.shipSkins) {
                        Object.keys(gameData.shipSkins).forEach(key => {
                            if (shipSkins[key]) {
                                shipSkins[key].unlocked = gameData.shipSkins[key].unlocked || false;
                                shipSkins[key].equipped = gameData.shipSkins[key].equipped || false;
                            }
                        });
                    }
                    
                    if (gameData.meteorSkins) {
                        Object.keys(gameData.meteorSkins).forEach(key => {
                            if (meteorSkins[key]) {
                                meteorSkins[key].unlocked = gameData.meteorSkins[key].unlocked || false;
                                meteorSkins[key].equipped = gameData.meteorSkins[key].equipped || false;
                            }
                        });
                    }
                    
                    // Gemi rengini ve skin tipini g√ºncelle
                    ship.color = shipSkins[currentShipSkin].color;
                    ship.skinType = shipSkins[currentShipSkin].type;
                    
                } catch (error) {
                    console.error('Oyun verisi y√ºklenirken hata:', error);
                }
            }
        }

        // YENƒ∞: GELƒ∞≈ûMƒ∞≈û MAƒûAZA Sƒ∞STEMƒ∞
        function setupShop() {
            const shopItems = document.getElementById('shopItems');
            shopItems.innerHTML = '';

            // Gemi Skinleri
            const shipHeader = document.createElement('h3');
            shipHeader.textContent = 'üöÄ UZAY GEMƒ∞Sƒ∞ SKƒ∞NLERƒ∞';
            shipHeader.style.color = '#ff4444';
            shipHeader.style.textAlign = 'center';
            shipHeader.style.marginBottom = '1rem';
            shopItems.appendChild(shipHeader);

            Object.keys(shipSkins).forEach(skinKey => {
                const skin = shipSkins[skinKey];
                const item = document.createElement('div');
                
                let itemClass = 'shop-item';
                if (skin.unlocked) itemClass += ' unlocked';
                if (skin.equipped) itemClass += ' equipped';
                
                item.className = itemClass;
                
                const previewDiv = document.createElement('div');
                previewDiv.className = 'skin-preview';
                
                item.innerHTML = `
                    <h3>${skin.name}</h3>
                    <div class="skin-preview" id="preview-${skinKey}"></div>
                    ${!skin.unlocked ? `<div class="price-tag">Fiyat: ${skin.price} üí∞</div>` : ''}
                    <div style="display: flex; gap: 0.5rem; justify-content: center; margin-top: 0.5rem;">
                        ${!skin.unlocked ? 
                            `<button onclick="buyItem('ship', '${skinKey}')" style="
                                background: #ff4444;
                                color: white;
                                border: none;
                                padding: 0.5rem 1rem;
                                border-radius: 10px;
                                cursor: pointer;
                                font-weight: bold;
                            ">
                                üõí SATIN AL
                            </button>` : 
                            `<button onclick="equipItem('ship', '${skinKey}')" style="
                                background: ${skin.equipped ? '#ffff00' : '#00ff00'};
                                color: black;
                                border: none;
                                padding: 0.5rem 1rem;
                                border-radius: 10px;
                                cursor: pointer;
                                font-weight: bold;
                            ">
                                ${skin.equipped ? '‚úÖ KU≈ûANILDI' : '‚ö° KU≈ûAN'}
                            </button>`
                        }
                    </div>
                `;
                shopItems.appendChild(item);
                
                // √ñnizleme √ßiz
                setTimeout(() => {
                    const previewElement = document.getElementById(`preview-${skinKey}`);
                    if (previewElement) {
                        drawShipPreview(skinKey, previewElement);
                    }
                }, 100);
            });

            // Meteor Skinleri
            const meteorHeader = document.createElement('h3');
            meteorHeader.textContent = '‚òÑÔ∏è METEOR SKƒ∞NLERƒ∞';
            meteorHeader.style.color = '#ff4444';
            meteorHeader.style.textAlign = 'center';
            meteorHeader.style.marginTop = '2rem';
            meteorHeader.style.marginBottom = '1rem';
            shopItems.appendChild(meteorHeader);

            Object.keys(meteorSkins).forEach(skinKey => {
                const skin = meteorSkins[skinKey];
                const item = document.createElement('div');
                
                let itemClass = 'shop-item';
                if (skin.unlocked) itemClass += ' unlocked';
                if (skin.equipped) itemClass += ' equipped';
                
                item.className = itemClass;
                
                item.innerHTML = `
                    <h3>${skin.name}</h3>
                    <div class="skin-preview">
                        <div style="background: ${skin.color}; width: 40px; height: 40px; border-radius: 50%; margin: 0 auto;"></div>
                    </div>
                    ${!skin.unlocked ? `<div class="price-tag">Fiyat: ${skin.price} üí∞</div>` : ''}
                    <div style="display: flex; gap: 0.5rem; justify-content: center; margin-top: 0.5rem;">
                        ${!skin.unlocked ? 
                            `<button onclick="buyItem('meteor', '${skinKey}')" style="
                                background: #ff4444;
                                color: white;
                                border: none;
                                padding: 0.5rem 1rem;
                                border-radius: 10px;
                                cursor: pointer;
                                font-weight: bold;
                            ">
                                üõí SATIN AL
                            </button>` : 
                            `<button onclick="equipItem('meteor', '${skinKey}')" style="
                                background: ${skin.equipped ? '#ffff00' : '#00ff00'};
                                color: black;
                                border: none;
                                padding: 0.5rem 1rem;
                                border-radius: 10px;
                                cursor: pointer;
                                font-weight: bold;
                            ">
                                ${skin.equipped ? '‚úÖ KU≈ûANILDI' : '‚ö° KU≈ûAN'}
                            </button>`
                        }
                    </div>
                `;
                shopItems.appendChild(item);
            });
        }

        function buyItem(type, itemKey) {
            const items = type === 'ship' ? shipSkins : meteorSkins;
            const item = items[itemKey];
            
            if (gold >= item.price && !item.unlocked) {
                gold -= item.price;
                item.unlocked = true;
                
                drawGold();
                setupShop();
                saveGameData();
                showPurchaseSuccess(item.name);
            } else if (!item.unlocked) {
                alert('Yeterli altƒ±n yok!');
            }
        }

        // YENƒ∞: SKƒ∞N KU≈ûANMA MEKANƒ∞ZMASI
        function equipItem(type, itemKey) {
            const items = type === 'ship' ? shipSkins : meteorSkins;
            const currentKey = type === 'ship' ? currentShipSkin : currentMeteorSkin;
            
            // √ñnceki skin'in equipped durumunu kaldƒ±r
            if (items[currentKey]) {
                items[currentKey].equipped = false;
            }
            
            // Yeni skin'i equipped yap
            items[itemKey].equipped = true;
            
            if (type === 'ship') {
                currentShipSkin = itemKey;
                ship.color = items[itemKey].color;
                ship.skinType = items[itemKey].type;
            } else {
                currentMeteorSkin = itemKey;
            }
            
            setupShop();
            saveGameData();
            
            showEquipSuccess(items[itemKey].name);
        }

        function showPurchaseSuccess(message) {
            alert(`‚úÖ ${message} ba≈üarƒ±yla satƒ±n alƒ±ndƒ±!`);
        }

        function showEquipSuccess(message) {
            alert(`‚ö° ${message} ku≈üanƒ±ldƒ±!`);
        }

        // OYUN MODU SE√áƒ∞Mƒ∞
        function setupGameModes() {
            const modes = ['easy', 'normal', 'hard', 'extreme', 'impossible'];
            
            modes.forEach(mode => {
                document.getElementById(mode + 'Mode').addEventListener('click', function() {
                    gameMode = mode.charAt(0).toUpperCase() + mode.slice(1);
                    
                    document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    updateModeDescription();
                    
                    saveGameData();
                });
            });
        }

        function updateModeDescription() {
            const lang = texts[language];
            modeDescription.textContent = lang.modeDescriptions[gameMode.toLowerCase()];
        }

        // Buton event listener'larƒ±
        document.getElementById('shopBtn').addEventListener('click', function() {
            menu.style.display = 'none';
            shopMenu.style.display = 'flex';
            setupShop();
        });

        document.getElementById('backToMenuBtn').addEventListener('click', function() {
            shopMenu.style.display = 'none';
            menu.style.display = 'flex';
        });

        document.getElementById('shopBackBtn').addEventListener('click', function() {
            shopMenu.style.display = 'none';
            menu.style.display = 'flex';
        });

        document.getElementById('language-btn').addEventListener('click', function() {
            language = language === 'English' ? 'Turkish' : 'English';
            updateUI();
            saveGameData();
        });

        // UI g√ºncelleme
        function updateUI() {
            const lang = texts[language];
            document.getElementById('startBtn').textContent = lang.start;
            document.getElementById('easyMode').textContent = lang.easy;
            document.getElementById('normalMode').textContent = lang.normal;
            document.getElementById('hardMode').textContent = lang.hard;
            document.getElementById('extremeMode').textContent = lang.extreme;
            document.getElementById('impossibleMode').textContent = lang.impossible;
            document.getElementById('language-btn').textContent = lang.language;
            
            updateModeDescription();
            drawLives();
            drawScore();
            drawGold();
            drawPowerDisplay();
        }

        // Oyun d√∂ng√ºs√º
        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            drawSpaceBackground();
            drawStars();
            updateStars();
            
            if (gameActive) {
                updateGame();
                drawMeteors();
                drawPowerUps();
                drawBullets();
                drawBoss();
                drawExplosions();
                drawShip();
            }
            
            requestAnimationFrame(gameLoop);
        }

        function drawSpaceBackground() {
            // Karanlƒ±k kƒ±yamet temasƒ±
            ctx.fillStyle = '#110000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Kƒ±rmƒ±zƒ± nebulalar
            ctx.fillStyle = 'rgba(255, 0, 0, 0.1)';
            ctx.beginPath();
            ctx.arc(canvas.width * 0.2, canvas.height * 0.3, 80, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = 'rgba(255, 100, 0, 0.1)';
            ctx.beginPath();
            ctx.arc(canvas.width * 0.8, canvas.height * 0.2, 60, 0, Math.PI * 2);
            ctx.fill();
        }

        function togglePause() {
            if (!gameActive) return;
            gamePaused = !gamePaused;
            pauseBtn.textContent = gamePaused ? "‚ñ∂" : "‚è∏";
        }

        function endGame() {
            gameActive = false;
            gamePaused = false;
            menu.style.display = 'flex';
            pauseBtn.style.display = 'none';
            bossHealthBar.style.display = 'none';
            bossName.style.display = 'none';
            saveGameData();
        }

        // Oyun mantƒ±ƒüƒ±
        function updateGame() {
            if (gamePaused) return;
            
            // Zaman donmasƒ± efekti
            const timeScale = powerUps.timeFreeze.active ? 0.3 : 1.0;
            
            // Gemi hareketi
            if (ship.moveLeft && ship.x - ship.width/2 > 0) {
                ship.x -= ship.speed * timeScale;
            }
            if (ship.moveRight && ship.x + ship.width/2 < canvas.width) {
                ship.x += ship.speed * timeScale;
            }
            
            // Meteor hareketi ve √ßarpƒ±≈üma
            meteors.forEach((meteor, index) => {
                meteor.y += meteor.speed * timeScale;
                
                // √áarpƒ±≈üma kontrol√º
                if (Math.abs(meteor.x - ship.x) < meteor.size + ship.width/2 && 
                    Math.abs(meteor.y - ship.y) < meteor.size + ship.height/2) {
                    
                    if (ship.shield) {
                        ship.shield = false;
                        createExplosion(meteor.x, meteor.y, meteor.size * 2, '#00ffff');
                    } else {
                        lives--;
                        drawLives();
                        createExplosion(ship.x, ship.y, 30, '#ff0000');
                        if (lives <= 0) {
                            endGame();
                        }
                    }
                    meteors.splice(index, 1);
                }
                
                // Mermi √ßarpƒ±≈ümasƒ±
                bullets.forEach((bullet, bIndex) => {
                    if (Math.abs(meteor.x - bullet.x) < meteor.size + 3 && 
                        Math.abs(meteor.y - bullet.y) < meteor.size + 8) {
                        
                        meteor.health -= bullet.damage || 10;
                        bullets.splice(bIndex, 1);
                        createExplosion(meteor.x, meteor.y, 15, meteor.color);
                        
                        if (meteor.health <= 0) {
                            // √ñzel efektler
                            if (meteor.effect === 'explosive') {
                                createExplosion(meteor.x, meteor.y, meteor.size * 3, '#ff5500');
                            }
                            
                            meteors.splice(index, 1);
                            score += meteor.points;
                            meteorsDestroyed++;
                            gold += Math.floor(meteor.points / 5);
                            
                            // YENƒ∞: 10 METEOR BONUS Sƒ∞STEMƒ∞
                            if (meteorsDestroyed % 10 === 0) {
                                gold += 10;
                                showBonusPopup();
                            }
                            
                            drawScore();
                            drawGold();
                            saveGameData();
                            checkMeteorBonus();
                            
                            // Boss spawn kontrol√º
                            if (meteorsDestroyed % 12 === 0 && !bossActive) {
                                boss = createBoss();
                            }
                        }
                    }
                });
            });
            
            // Boss hareketi ve saldƒ±rƒ±sƒ±
            if (bossActive) {
                boss.x += Math.sin(Date.now() / 1000) * boss.speed * timeScale;
                
                // Boss saldƒ±rƒ±sƒ±
                if (Date.now() - boss.lastAttack > boss.attackCooldown * timeScale) {
                    boss.lastAttack = Date.now();
                    
                    if (boss.attackPattern === 'fire') {
                        // Ate≈ü topu
                        bullets.push({x: boss.x, y: boss.y + 40, vx: 0, vy: 6, color: '#ff6600', damage: 20});
                    } else if (boss.attackPattern === 'shadow') {
                        // G√∂lge saldƒ±rƒ±sƒ± - √ßapraz
                        bullets.push({x: boss.x - 20, y: boss.y + 40, vx: -1, vy: 5, color: '#990000', damage: 15});
                        bullets.push({x: boss.x + 20, y: boss.y + 40, vx: 1, vy: 5, color: '#990000', damage: 15});
                    } else {
                        // √áoklu saldƒ±rƒ±
                        for (let i = 0; i < 3; i++) {
                            bullets.push({
                                x: boss.x - 30 + i * 30, 
                                y: boss.y + 40, 
                                vx: (i - 1) * 0.5, 
                                vy: 6, 
                                color: '#ff0066', 
                                damage: 10
                            });
                        }
                    }
                }
                
                // Boss'a hasar
                bullets.forEach((bullet, bIndex) => {
                    if (bullet.vy < 0 && Math.abs(boss.x - bullet.x) < boss.width/2 && 
                        Math.abs(boss.y - bullet.y) < boss.height/2) {
                        
                        bossHealth -= (bullet.damage || 10);
                        bullets.splice(bIndex, 1);
                        createExplosion(bullet.x, bullet.y, 20, boss.color);
                        updateBossHealthBar();
                        
                        if (bossHealth <= 0) {
                            bossActive = false;
                            bossHealthBar.style.display = 'none';
                            bossName.style.display = 'none';
                            createExplosion(boss.x, boss.y, 100, boss.color);
                            score += 500;
                            gold += 50;
                            drawScore();
                            drawGold();
                            saveGameData();
                        }
                    }
                });
            }
            
            // G√º√ß y√ºkseltme hareketi
            powerUpItems.forEach((powerUp, index) => {
                powerUp.y += powerUp.speed * timeScale;
                
                // Toplama kontrol√º
                if (Math.abs(powerUp.x - ship.x) < powerUp.width + ship.width/2 && 
                    Math.abs(powerUp.y - ship.y) < powerUp.height + ship.height/2) {
                    
                    activatePowerUp(powerUp.type);
                    powerUpItems.splice(index, 1);
                    createExplosion(powerUp.x, powerUp.y, 20, powerUp.color);
                }
                
                // Ekrandan √ßƒ±kma
                if (powerUp.y > canvas.height) {
                    powerUpItems.splice(index, 1);
                }
            });
            
            // G√º√ß y√ºkseltme s√ºreleri
            updatePowerUpDurations();
            
            // Yeni meteor ekle
            const settings = gameModeSettings[gameMode];
            if (Math.random() < settings.spawnRate * timeScale) {
                meteors.push(createMeteor());
            }
            
            // Yeni g√º√ß y√ºkseltme ekle
            if (Math.random() < settings.powerUpRate * timeScale) {
                powerUpItems.push(createPowerUp());
            }
            
            // Mermi hareketi
            bullets.forEach((bullet, index) => {
                bullet.y += bullet.vy * timeScale;
                bullet.x += bullet.vx * timeScale;
                if (bullet.y < 0 || bullet.y > canvas.height || bullet.x < 0 || bullet.x > canvas.width) {
                    bullets.splice(index, 1);
                }
            });
        }

        function activatePowerUp(type) {
            powerUps[type].active = true;
            powerUps[type].duration = powerUps[type].maxDuration;
            
            if (!activePowerUps.includes(type)) {
                activePowerUps.push(type);
            }
            
            if (type === 'shield') {
                ship.shield = true;
            }
            
            drawPowerDisplay();
        }

        function updatePowerUpDurations() {
            activePowerUps.forEach((type, index) => {
                powerUps[type].duration--;
                
                if (powerUps[type].duration <= 0) {
                    powerUps[type].active = false;
                    activePowerUps.splice(index, 1);
                    
                    if (type === 'shield') {
                        ship.shield = false;
                    }
                }
            });
            drawPowerDisplay();
        }

        // Oyun ba≈ülatma
        document.getElementById('startBtn').addEventListener('click', () => {
            gameActive = true;
            gamePaused = false;
            score = 0;
            meteorsDestroyed = 0;
            
            lives = 3;
            
            meteorsDestroyed = 0;
            bossActive = false;
            meteors = [];
            bullets = [];
            powerUpItems = [];
            activePowerUps = [];
            explosions = [];
            
            // Yƒ±ldƒ±zlarƒ± olu≈ütur
            createStars();
            
            Object.keys(powerUps).forEach(key => {
                powerUps[key].active = false;
                powerUps[key].duration = 0;
            });
            
            ship.shield = false;
            menu.style.display = 'none';
            pauseBtn.style.display = 'block';
            pauseBtn.textContent = '‚è∏';
            ship.x = canvas.width / 2;
            
            const settings = gameModeSettings[gameMode];
            ship.speed = settings.playerSpeed;
            
            updateUI();
        });

        pauseBtn.addEventListener('click', togglePause);

        // Ba≈ülangƒ±√ß
        loadGameData();
        setupTouchControls();
        setupGameModes();
        setupShop();
        updateUI();
        createStars();
        gameLoop();

        // Global fonksiyonlar
        window.buyItem = buyItem;
        window.equipItem = equipItem;
    </script>
</body>
</html>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
            -webkit-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body>
    </body>
</html>
        </textarea>

        <div class="btn-group">
            <a href="#" class="btn btn-download" id="download-btn">
                APOCALYPSE KODUNU ƒ∞NDƒ∞R (.TXT)
            </a>
            
            <button class="btn btn-upload" id="upload-btn">
                PANOYA KOPYALA
            </button>
        </div>
    </div>
    
    <script>
        const sourceTextArea = document.getElementById('source-text');
        const uploadBtn = document.getElementById('upload-btn');
        const downloadBtn = document.getElementById('download-btn');

        // UTF-8 BOM ekleyerek indirme (ANSI hatasƒ±nƒ± √∂nler)
        window.addEventListener('DOMContentLoaded', () => {
            const textContent = sourceTextArea.value;
            const blob = new Blob(["\ufeff" + textContent], { type: 'text/plain;charset=utf-8' });
            downloadBtn.href = URL.createObjectURL(blob);
            downloadBtn.download = 'Ultimate_Meteor_Apocalypse_Source.txt';
        });

        // KESƒ∞N √á√ñZ√úM: Kopyala Butonu Fonksiyonu
        uploadBtn.addEventListener('click', () => {
            sourceTextArea.select();
            sourceTextArea.setSelectionRange(0, 99999); // Mobil i√ßin se√ßimi garantile

            // √ñnce modern y√∂ntemi dene
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(sourceTextArea.value).then(basariliEfekti);
            } else {
                // WebView/HTTP i√ßin garantili eski y√∂ntem
                try {
                    const basarili = document.execCommand('copy');
                    if (basarili) basariliEfekti();
                    else throw new Error();
                } catch (err) {
                    alert("Kopyalama ba≈üarƒ±sƒ±z. L√ºtfen metne basƒ±lƒ± tutup manuel kopyalayƒ±n.");
                }
            }
        });

        function basariliEfekti() {
            uploadBtn.textContent = "‚úì KOD KOPYALANDI!";
            uploadBtn.style.background = "linear-gradient(to bottom, #4CAF50, #2E7D32)";
            setTimeout(() => {
                uploadBtn.textContent = "PANOYA KOPYALA";
                uploadBtn.style.background = "linear-gradient(to bottom, #444, #222)";
            }, 2000);
        }
    </script>
</body>
</html>
